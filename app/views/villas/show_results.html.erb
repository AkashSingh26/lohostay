<div class="container">
  <h1 class="my-4"><%= @villa.name %></h1>
  <%= form_with url: show_results_villa_path(@villa), method: :get, local: true do %>
    <div class="form-group">
      <label for="start_date">Start Date</label>
      <%= date_field_tag :start_date, @start_date, class: 'form-control', required: true %>
    </div>
    <div class="form-group">
      <label for="end_date">End Date</label>
      <%= date_field_tag :end_date, @end_date, class: 'form-control', required: true %>
    </div>
    <%= submit_tag 'Check Availability', class: 'btn btn-primary my-2' %>
  <% end %>

  <% if @start_date.present? && @end_date.present? %>
    <h3 class="my-4">Rate Calculation</h3>
    <p><strong>Stay Period:</strong> <%= @start_date %> to <%= @end_date %></p>
    <% if @availability %>
      <p><strong>Total Price (including 18% GST):</strong> â‚¹<%= @total_price %></p>
    <% else %>
      <p class="text-danger">The villa is unavailable for the selected dates.</p>
    <% end %>
  <% else %>
    <p>Please specify a date range to see the total price.</p>
  <% end %>

  <%= link_to "Back to total villas", root_path, class: 'btn btn-secondary mt-4' %>
</div>
